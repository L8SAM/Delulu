
<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Delulu-List Pro</title>
  <style>
    :root {
      --bg: #d8b4f8;
      --text: #111111;
      --card: #ffffff;
      --highlight: #8e44ad;
    }
    body.dark {
      --bg: #1e1e1e;
      --text: #eeeeee;
      --card: #2a2a2a;
      --highlight: #9b59b6;
    }
    body {
      background: var(--bg);
      color: var(--text);
      font-family: sans-serif;
      margin: 0;
      padding: 2rem;
      transition: background 0.4s, color 0.4s;
    }
    .container { max-width: 800px; margin: auto; }
    h1 { text-align: center; }

    .logo {
      text-align: center;
      margin-bottom: 1rem;
    }

    .logo img {
      max-width: 120px;
      border-radius: 20px;
    }

    .controls, .note-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      margin-bottom: 1rem;
    }

    input, select, button, textarea {
      padding: 10px;
      border-radius: 8px;
      font-size: 1rem;
      border: 1px solid #ccc;
      background: var(--card);
      color: var(--text);
    }

    textarea {
      flex: 1;
      min-height: 80px;
      resize: vertical;
    }

    button {
      background: var(--highlight);
      color: white;
      border: none;
      cursor: pointer;
      transition: transform 0.2s ease;
    }

    button:hover {
      transform: scale(1.05);
    }

    .toggle-theme {
      float: right;
      background: none;
      color: var(--text);
      border: 1px solid var(--text);
    }

    ul, .note-list { list-style: none; padding: 0; }

    li, .note-item {
      background: var(--card);
      margin-bottom: 10px;
      padding: 1rem;
      border-radius: 8px;
      animation: fadeIn 0.4s ease;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }

    .meta {
      font-size: 0.85rem;
      color: gray;
    }

    .status {
      margin-top: 1rem;
      font-weight: bold;
    }

    input[type="checkbox"] {
      transform-origin: center;
      transition: transform 0.3s ease;
    }

    input[type="checkbox"]:checked {
      transform: rotateY(180deg);
    }

    .notes-section {
      margin-top: 3rem;
    }

    .notes-section h2 {
      margin-bottom: 0.5rem;
    }

    @media (max-width: 600px) {
      .controls, .note-controls { flex-direction: column; }
      li { flex-direction: column; align-items: flex-start; }
    }
  </style>
</head>
<body>
  <div class="container">
    <button class="toggle-theme" onclick="toggleTheme()">🌗 Theme</button>

    <div class="logo">
      <img src="https://via.placeholder.com/100x100.png?text=🦄" alt="Delulu-Logo" />
    </div>

    <h1>Delulu-List Pro</h1>

    <div class="controls">
      <input type="text" id="itemText" placeholder="Traumziel..." />
      <select id="itemAuthor">
        <option value="Noah">👱 Noah</option>
        <option value="Shirin">👩‍🦰 Shirin</option>
      </select>
      <select id="itemTimeframe">
        <option value="jetzt">📍 Jetzt</option>
        <option value="jahr">🗓 Im nächsten Jahr</option>
        <option value="zukunft">🌌 Irgendwann</option>
      </select>
      <button onclick="addItem()">➕ Hinzufügen</button>
    </div>

    <ul id="bucketList"></ul>
    <div class="status" id="statusCount"></div>

    <div class="notes-section">
      <h2>📝 Notizen & Gedanken</h2>
      <div class="note-controls">
        <textarea id="noteText" placeholder="Teile deine Gedanken oder Ankündigungen..."></textarea>
        <button onclick="addNote()">💬 Eintragen</button>
      </div>
      <div class="note-list" id="noteList"></div>
    </div>
  </div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.4.0/firebase-database-compat.js"></script>

  <script>
    // Darkmode speichern und laden
    window.addEventListener("DOMContentLoaded", () => {
      const savedTheme = localStorage.getItem("theme");
      if (savedTheme === "dark") {
        document.body.classList.add("dark");
      }
    });

    function toggleTheme() {
      document.body.classList.toggle("dark");
      localStorage.setItem("theme", document.body.classList.contains("dark") ? "dark" : "light");
    }

    const firebaseConfig = {
      apiKey: "AIzaSyBKrD4FnVNxhAtcm8vLfNA0xvReYbjQkLY",
      authDomain: "delulu-b5416.firebaseapp.com",
      databaseURL: "https://delulu-b5416-default-rtdb.europe-west1.firebasedatabase.app",
      projectId: "delulu-b5416",
      storageBucket: "delulu-b5416.firebasestorage.app",
      messagingSenderId: "758486842158",
      appId: "1:758486842158:web:b423e2ea1e1058f36c18bf",
      measurementId: "G-BFTV5VK69N"
    };

    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();
    const listRef = db.ref("deluluItems");
    const notesRef = db.ref("deluluNotes");

    function addItem() {
      const text = document.getElementById("itemText").value.trim();
      const author = document.getElementById("itemAuthor").value;
      const timeframe = document.getElementById("itemTimeframe").value;
      if (!text) return;
      const newItem = { text, author, timeframe, done: false, timestamp: Date.now() };
      listRef.push(newItem);
      document.getElementById("itemText").value = "";
    }

    function toggleDone(key, current) {
      listRef.child(key).update({ done: !current });
    }

    function removeItem(key) {
      listRef.child(key).remove();
    }

    function renderList() {
      listRef.on("value", snapshot => {
        const ul = document.getElementById("bucketList");
        const status = document.getElementById("statusCount");
        ul.innerHTML = "";
        let total = 0, done = 0;

        snapshot.forEach(child => {
          const item = child.val();
          const key = child.key;
          total++;
          if (item.done) done++;

          const li = document.createElement("li");
          li.innerHTML = `
            <div>
              <input type="checkbox" ${item.done ? "checked" : ""} onclick="toggleDone('${key}', ${item.done})" />
              <strong style="margin-left: 8px;">${item.text}</strong>
              <div class="meta">👤 ${item.author} · 🕓 ${item.timeframe}</div>
            </div>
            <button onclick="removeItem('${key}')">🗑️</button>
          `;
          ul.appendChild(li);
        });

        status.textContent = \`✅ Erledigt: \${done} / \${total}\`;
      });
    }

    function addNote() {
      const text = document.getElementById("noteText").value.trim();
      if (!text) return;
      const note = { text, timestamp: Date.now() };
      notesRef.push(note);
      document.getElementById("noteText").value = "";
    }

    function renderNotes() {
      notesRef.on("value", snapshot => {
        const container = document.getElementById("noteList");
        container.innerHTML = "";
        snapshot.forEach(child => {
          const note = child.val();
          const div = document.createElement("div");
          const time = new Date(note.timestamp).toLocaleString();
          div.className = "note-item";
          div.innerHTML = `<div>${note.text}</div><div class="meta">${time}</div>`;
          container.prepend(div);
        });
      });
    }

    renderList();
    renderNotes();
  </script>
</body>
</html>
